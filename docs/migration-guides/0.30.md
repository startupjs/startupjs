# Upgrade 0.29 to 0.30

Change `startupjs` and all `@startupjs/*` dependencies in your `package.json` to `^0.30`.

## BREAKING CHANGES

- **sharedb-access** - There was changed parameters of functions in `static access` properies (changed backend to model). Now they look like:

  ```js
  class ItemModel {
    static access = {
      create: async (model, collection, docId, doc, session) => { your code }
      read: async (model, collection, docId, doc, session) => { your code },
      update: async (model, collection, docId, oldDoc, session, ops, newDoc) => { your code },
      delete: async (model, collection, docId, doc, session) => { your code }
    }
  }
  ```

- **server-aggregation** - There was changed parameters of functions in `static access` properies. Now they look like:
  ```js
  class ItemModel {
    static aggregations = {
      openEvents: async (model, params, session) => {
        return [
          {$match: {status: 'open'}}
        ]
      }
    }
  }
  ```
  Here `model` - it's sharedb model; `params` - it's parameters from `$params` field in aggregation call; `session` - it's your session.

- **DateTimePicker**:
  - for Android and IOS changed deprecated libraries from `react-native` to `DateTimePicker` from `@react-native-community/datetimepicker`.
  - for web changed library to `react-datepicker` that allow use calendar in mode `datetime` in Safari and Firefox.

  Need to manually install a new library `yarn add @react-native-community/datetimepicker` with your package manager, install pod for IOS and init backend side of UI:

    - import `initUi` and` getUiHead` and connect them in the body of the `startupjsServer` and `getHead` functions in `server/index.js`.

    ```js
    import { getUiHead, initUi } from '@startupjs/ui/server'

    startupjsServer({
      getHead,
      ...
    }, (ee, options) => {
      ...
      initUi(ee, options)
      ...
    })

    function getHead (appName) {
      return `
        ${getUiHead()}
        other head text
      `
    }
    ```

    - add module `@startupjs/ui/server` to `forceCompileModules` in `webpack.server.config.cjs`

    ```js
    const getConfig = require('startupjs/bundler.cjs').webpackServerConfig

    module.exports = getConfig(undefined, {
      forceCompileModules: ['@startupjs/ui/server']
    })
    ```

## Features

- **DateTimePicker**
  - add new properties `disabled`, `format`, `minuteInterval`, `placeholder`, `size`, `timeFormat`, `cancelButtonText`, `confirmButtonText`, `is24Hour` [See more](/docs/forms/DateTimePicker).
