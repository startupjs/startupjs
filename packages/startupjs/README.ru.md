# Плагины в Startupjs

## Что такое плагины и зачем они нужны

Платформа startupjs поддерживает систему плагинов, которая позволяет легко интегрировать дополнительные блоки кода в приложение, расширяя таким образом функциональность самого приложения. Эти блоки мы и будем называть плагинами. С помощью плагинов можно добавлять новые компоненты, маршруты, функциональность сервера и многое другое, что позволит нам адаптировать приложение под конкретные потребности. Причем все это становится доступным без необходимости изменения основного кода приложения.

В целом, система плагинов в startupjs обеспечивает гибкость и расширяемость при разработке сайтов или мобильных приложений, что делает его привлекательным выбором для многих разработчиков.


## Как работает система плагинов

1) **Создание плагина**: Разработчики создают плагины в отдельных файлах вида *.plugin.js. Плагины создаются с помощью функции createPlugin.

2) **Регистрация плагинов**: Разработчики регистрируют плагины в приложении, указывая информацию о них в специальных местах: это файлы package.json и startupjs.config.js.

3) **Хуки и события**: Плагины подписываются на определенные события, которые генерируются внутри приложения, и реагируют на них выполнением тех или иных действий. Когда возникает нужное событие (например, инициализация сессии на сервере), система запускает соответствующие плагины, позволяя им выполнить свою логику. Отслеживание событий производится с помощью [хуков](https://github.com/startupjs/startupjs/blob/master/packages/startupjs/hooks.ru.md).

4) **Инициализация плагинов**: При старте приложения система запускает зарегистрированные плагины. Вся функциональность производится благодаря хукам.



## Виды хуков

**Хуки** - это специальные функции, которые используются в системе плагинов startupjs для определения функциональности плагинов в разных средах выполнения, иными словами, разработчик может явно указать, для какой среды выполнения предназначен тот или иной код. В startupjs существуют три среды выполнения: клиентская, серверная и изоморфная. Соответственно и хуки у нас делятся на три вида, каждый из которых будет работать в своей среде выполнения -  клиентские, серверные и изоморфные.

- **Клиентские хуки**: Выполняются на клиентской стороне приложения, в браузере пользователя. Они могут содержать код, связанный с интерфейсом пользователя или клиентской логикой.

- **Серверные хуки**: Выполняются на серверной стороне приложения, в среде Node.js. Они могут содержать код, связанный с обработкой HTTP-запросов, настройкой API и т.д.

- **Изоморфные хуки**: Выполняются как на клиентской, так и на серверной стороне приложения. Это позволяет совместно использовать код между клиентом и сервером, что упрощает разработку и поддержку приложения.

На примере это может выглядеть так:

```js
import { createPlugin } from 'startupjs';

export default createPlugin({
  name: 'myPlugin',
  // client, server, isomorphic - это как раз среды выполнения, для которых мы будем прописывать хуки
  client: (pluginOptions) => ({
    // Клиентские хуки
    // Код для выполнения на клиентской стороне приложения
  }),
  server: (pluginOptions) => ({
    // Серверные хуки
    // Код для выполнения на серверной стороне приложения
  }),
  isomorphic: (pluginOptions) => ({
    // Изоморфные хуки
    // Код, который должен выполняться как на клиенте, так и на сервере
  })
})
```

Технически, client, server и isomorphic - это функции, которые принимают пользовательские опции (pluginOptions) и возвращают объект с различными хуками, содержащими свои настройки и функциональность, которые связаны с клиентской частью, серверной или и той, и другой одновременно.

Код, написанный для client попадет в клиентскую сборку, для server - в серверную, код из isomorphic попадет в обе сборки.

## Читайте дальше:
- [Как создать плагин](https://github.com/startupjs/startupjs/blob/master/packages/startupjs/createPlugin.ru.md)
