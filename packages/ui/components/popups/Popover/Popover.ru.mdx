import { useState } from 'react'
import { View, TouchableOpacity, Text, ScrollView } from 'react-native'
import { faUserCircle } from '@fortawesome/free-solid-svg-icons'
import Popover from './index.js'
import Icon from '../../Icon'
import Row from '../../Row'
import Button from '../../Button'
import Br from '../../Br'

# Popover
Всплывающее окно для показа дополнительного контента, связанного каким-то образом с определённым элементом на странице и появляющееся при нажатии на него.

```jsx
import { Popover } from '@startupjs/ui'
```

## Инициализация

Перед использованием нужно настроить [Portal](/docs/components/Portal)

## Пример
```jsx example
const captionStyle = { width: 24, height: 24 }

function renderContent () {
  return pug`
    View
      Text Контент
  `
}

return pug`
  Popover(
    style=captionStyle
    renderContent=renderContent
  )
    Icon(icon=faUserCircle size='xl')
`
```

## Размеры
```jsx example
const contentStyle = { paddingTop: 0, paddingBottom: 0, paddingLeft: 0, paddingRight: 0 }

const [content, setContent] = useState([1, 2])

function renderContent () {
  return pug`
    ScrollView(style={ maxHeight: 100 })
      each item, index in content
        View(style={ padding: 20 } key=index)
          Text Контент #{item}

      TouchableOpacity(
        style={ padding: 20 }
        onPress=()=> {
          content.pop()
          setContent([...content])
        }
      )
        Text Удалить элемент
  `
}

return pug`
  Popover(
    contentStyle=contentStyle
    renderContent=renderContent
  )
    Button Открыть
`
```

```jsx example
const contentStyle = { paddingTop: 0, paddingBottom: 0, paddingLeft: 0, paddingRight: 0 }
const [content, setContent] = useState([1, 2])

function renderContent () {
  return pug`
    ScrollView(style={ height: 100 })
      each item, index in content
        View(style={ padding: 20 } key=index)
          Text Контент #{item}

      TouchableOpacity(
        style={ padding: 20 }
        onPress=()=> {
          content.pop()
          setContent([...content])
        }
      )
        Text Удалить элемент
  `
}

return pug`
  Popover(
    contentStyle=contentStyle
    renderContent=renderContent
  )
    Button Открыть
`
```

```jsx example
const [content, setContent] = useState([1,2])

function renderContent () {
  return pug`
    View(style={ width: 400 })
      Text Контент
  `
}

return pug`
  Popover(renderContent=renderContent)
    Button Открыть
`
```

- hasWidthCaption: задать ширину по Caption (boolean)
```jsx example
const [content, setContent] = useState([1, 2])

function renderContent () {
  return pug`
    View
      Text Контент
  `
}

return pug`
  Popover(
    hasWidthCaption=true
    renderContent=renderContent
  )
    Button Открыть
`
```

## Позиция
- position: имеет 4 варианта положений (top, bottom, left, right)
- attachment: дополнительный параметр для смещения (start, center, end)
```jsx example
const blockStyle = { width: 56, marginRight: 8, marginRight: 8, marginTop: 4, marginBottom: 4 }

const placements = [
  ['', 'top-start', 'top-center', 'top-end', ''],
  ['left-start', '', '', '', 'right-start'],
  ['left-center', '', '', '', 'right-center'],
  ['left-end', '', '', '', 'right-end'],
  ['', 'bottom-start', 'bottom-center', 'bottom-end', '']
]

function getPopover(placement, index) {
  if (!placement) return <View key={index} style={blockStyle} />

  const [position, attachment] = placement.split('-')
  const initials = (position[0] + attachment[0]).toUpperCase()

  function renderContent () {
    return pug`
      View
        Text Контент
    `
  }

  return pug`
    Popover(
      key=index
      style=blockStyle
      hasArrow=true
      animateType='scale'
      position=position
      attachment=attachment
      renderContent=renderContent
    )
      Button= initials
  `
}

return pug`
  View(style={ alignItems: 'center' })
    each row, rowIndex in placements
      Row(key=rowIndex)
        each placement, index in row
          = getPopover(placement, index)
`
```

## Анимации
animateType - проп отвечающий за тип анимации
Есть три типа анимации при открытии: opacity, scale
```jsx example
const animations = ['Opacity', 'Scale']

function renderContent () {
  return pug`
    View
      Text Контент
  `
}

return pug`
  Row
    each animate, index in animations
      Popover(
        key=index
        hasArrow=true
        style={ marginRight: 8 }
        animateType=animate.toLowerCase()
        renderContent=renderContent
      )
        Button= animate
`
```

## Стилизация
- hasArrow: нужно ли использовать стрелку (по дефолту false)
```jsx example
function renderContent () {
  return pug`
    View
      Text Контент
  `
}

return pug`
  Popover(
    hasArrow=true
    renderContent=renderContent
  )
    Button Со стрелкой
`
```

## Так же
- placements: какие позиции можно использовать при автофиксе
- durationOpen: время анимации при открытии
- durationClose: время анимации при закрытии

<Br lines={10} />
