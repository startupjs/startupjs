import { useEffect, useMemo } from 'react'
import Input from '../Input'
import Div from '../../Div'
import Br from '../../Br'
import Span from '../../typography/Span'
import { $root, useValue, u } from 'startupjs'
import { Sandbox } from '@startupjs/docs'

# Input (инпут)

Инпут предоставляет апи-обвертку над инпут компонентами, добавляя двухстороннюю привязку данных, различные настраиваемые компоновки которые позволяют по-разному отображать инпуты с подписью и описанием, а также предоставляет возможность отображать ошибку.

```jsx
import { Input } from from '@startupjs/ui'
```

**Инпуты**

Возможные типы: [array](/docs/forms/Array), [сheckbox](/docs/forms/Checkbox), [date](/docs/forms/DateTimePicker), [datetime](/docs/forms/DateTimePicker), [multiselect](/docs/forms/Multiselect), [number](/docs/forms/NumberInput), [object](/docs/forms/ObjectInput), [password](/docs/forms/PasswordInput), [radio](/docs/forms/Radio), [select](/docs/forms/Select), [time](/docs/forms/DateTimePicker), [text](/docs/forms/TextInput).

Вы можете использовать любой из вышеперечисленных компонентов, указав свойство type.

**Компоновки**

Возможные типы:
- `pure` отображает инпут без подписи и описания
- `rows` отображает инпут в одной строке с предоставленной подписью и описанием
- `columns` отображает инпут в двух столбцах с предоставленной подписью и описанием

There are several rules that determine which layout to use:
- для разрешений экрана планшета и ниже всегда используется компоновка `rows`
- для разрешений экрана больше планшета вы можете использовать любую из вышеперечисленных компоновок указав свойство `layout` компонента, но если компоновка не передается компоненту, то она автоматически определяется по логике: `rows` если указано свойство `label` или `description`, в противном случае `pure`

## Простой пример

```jsx example
const [, $value] = useValue()

return (
  <Input
    type='text'
    $value={$value}
  />
)
```

## Компоновка

```jsx example
const [, $value] = useValue()

return (
  <Input
    type='text'
    label='Password'
    description="Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter"
    layout='columns'
    $value={$value}
  />
)
```

## Отображение ошибок

Для отображения ошибки, передайте текст ошибки в свойство `error`

```jsx example
const [value, $value] = useValue()

return (
  <Input
    $value={$value}
    error={value ? '' : 'Нужно заполнить поле'}
  />
)
```

## Sandbox

<Sandbox
  Component={Input}
  props={{
    value: $root.get('_session.Sandbox.Input.value'), // Common
    $value: $root.scope('_session.Sandbox.Input.value'), // Common
    options: ['New York', 'Los Angeles', 'Tokyo'], // MultiSelect
    items: { type: 'text' }, // ArrayInput
    properties: {
      email: { input: 'text', label: 'Email' },
      password: {
        input: 'text',
        label: 'Password',
        description: "Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter"
      }
    }, // ObjectInput
    onChange: value => $root.set('_session.Sandbox.Input.value', value), // Common
    onChangeText: value => $root.set('_session.Sandbox.Input.value', value), // TextInput
    onChangeDate: value => $root.set('_session.Sandbox.Input.value', value), // DateTimePicker
    onChangeNumber: value => $root.set('_session.Sandbox.Input.value', value) // NumberInput
  }}
  $props={$root.scope('_session.Sandbox.Input')}
  block
/>

export function SandboxEvent () {
  useEffect(()=> {
    $root.scope('_session.Sandbox.Input.type').on('change', type=> {
      if (type === 'array') {
        return $root.set('_session.Sandbox.Input.value', ['Green', 'Blue'])
      }
      $root.set('_session.Sandbox.Input.value', undefined)
    })
  }, [])
  return null
}

<SandboxEvent />
