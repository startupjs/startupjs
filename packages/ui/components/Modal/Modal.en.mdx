import { useValue } from 'startupjs'
import Modal from '../Modal'
import Button from '../Button'
import { Sandbox } from '@startupjs/docs'
import { useRef } from 'react'

# Modal

Modal can be used when the user needs to inform about ciritcal information, require decisions or interact a complex sub-application without navigating to a new page or interrupting the workflow.
The Modal component inherits from [React Native Modal](https://reactnative.dev/docs/modal), you can use all its props.

```jsx
import { Modal } from '@startupjs/ui'
```

## Example

- `showCross` boolean value, sets the display of a cross in the header (by default `true`)
- `onCrossPress` callback that is executed when you click on the cross in the header (it has a higher priority than `onCancel`)
- `onCancel` displays cancel button that uses this handler
- `onConfirm` displays confirm button that uses this handler
- `enableBackdropPress` boolean, sets whether the area around the modal will be clickable (default is `true`)
- `onBackdropPress` callback, which is executed when clicking on the area around the modalk
- `onRequestClose` callback, which is executed when the physical `Home` key on Android is pressed, the `Esc` key in the browser (by default, closes the modal)
- `onDismiss` callback, which is executed after closing the modalk in any way
- `onOrientationChange` callback, which is executed when the orientation of the mobile device is changed.

```jsx example
const [visible, $visible] = useValue(false)
const modalRef = useRef()

return (
  <React.Fragment>
    <Button onPress={() => modalRef.current.open()}>
      Open modal
    </Button>
    <Modal
      ref={modalRef}
      title='Example'
      $visible={$visible}
      dismissLabel='Close'
      confirmLabel='Accept'
      onCrossPress={() => $visible.set(false)}
      onCancel={() => $visible.set(false)}
      onConfirm={() => $visible.set(false)}
      onShow={() => console.log('Modal shown!')}
      onBackdropPress={() => $visible.set(false)}
      onDismiss={() => console.log('onDismiss')}
      onRequestClose={() => $visible.set(false)}
    >
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit.
    </Modal>
  </React.Fragment>
)
```

## Fullscreen modal

By default the modal shows like window in center of the page. To make it fullscreen, you need pass the string `fullscreen` to the `variant` property.

```jsx example
const [visible, $visible] = useValue(false)

return (
  <React.Fragment>
    <Button onPress={() => $visible.set(true)}>
      Open fullscreen modal
    </Button>
    <Modal
      variant='fullscreen'
      title='Fullscreen example'
      $visible={$visible}
      onCancel={() => $visible.set(false)}
      onConfirm={() => $visible.set(false)}
    >
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit.
    </Modal>
  </React.Fragment>
)
```

## Advanced usage

Modal consists of three parts - `Header`, `Content` and `Actions`. These parts can be used to add custom markup, the `Header` is used instead of `title`, the `Content` is used instead of children and the `Actions` is used instead of handlers `onCancel`, `onConfirm`. They can be used separately.

```jsx example
const [visible, $visible] = useValue(false)

return (
  <React.Fragment>
    <Button onPress={() => $visible.set(true)}>
      Open advanced modal
    </Button>
    <Modal $visible={$visible}>
      <Modal.Header>Advanced modal</Modal.Header>
      <Modal.Content>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit.
      </Modal.Content>
      <Modal.Actions>
        <Button
          shape='circle'
          onPress={() => $visible.set(false)}
        >
          Custom close
        </Button>
        <Button
          pushed
          shape='circle'
          onPress={() => $visible.set(false)}
        >
          Custom confirm
        </Button>
      </Modal.Actions>
    </Modal>
  </React.Fragment>
)
```

## Sandbox

### Modal

<Sandbox Component={Modal} />

### Modal.Header

<Sandbox Component={Modal.Header} />

### Modal.Content

<Sandbox Component={Modal.Content} />

### Modal.Actions

<Sandbox Component={Modal.Actions} />
